
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>On the Road...</title>
    <meta name="application-name" content="On the Road..."/>

    <link rel="profile" href="http://gmpg.org/xfn/11" />
    <link rel="theme author" href="Xu.hel,xu@xuui.net" />
    <link rel="shortcut icon" href="/assets/media/favicon.png"/>

    <!-- <link rel="stylesheet" media="screen" href="/assets/ilost/stylesheets/style.css" /> -->
    <script>if(self!=top){top.location.href=self.location.href;}</script>
    <link rel="alternate" type="application/rss+xml" title="On the Road... &raquo; RSS Feed" href="http://feed.feedsky.com/ecchanger" />
    <!-- <link rel="stylesheet" href="/assets/ilost/stylesheets/shortstyle.css" media="screen" /> -->
    <!-- <link rel="stylesheet" href="/assets/ilost/stylesheets/moon.css?t=12" media="screen" /> -->
    <link href="/assets/ilost/stylesheets/prettify.css?0.7308080102291225" type="text/css" rel="stylesheet" media="all">
<link href="/assets/ilost/stylesheets/style.css?0.4969267286197987" type="text/css" rel="stylesheet" media="all">
<link href="/assets/ilost/stylesheets/shortstyle.css?0.4817179601423526" type="text/css" rel="stylesheet" media="all">

    <!-- <script src="/assets/ilost/javascripts/jquery.js?0.599996455430571"></script>
<script src="/assets/ilost/javascripts/load.js?0.051265893212860125"></script>
<script src="/assets/ilost/javascripts/rotation.js?0.19502285281098952"></script>
<script src="/assets/ilost/javascripts/scripts.js?0.46895193410536984"></script>
 -->
    <script src="/assets/ilost/javascripts/jquery.js"></script>
  </head>
  <body class="blog custom-background">
    <header>
      <form role="search" method="get" id="searchform" action="http://google.com/search" >
       <div>
        <label class="screen-reader-text" for="q">搜索：</label>
        <input type="text" value="" name="q" id="s" />
        <input type="hidden" name="q" value="site:xcoder.im">
        <input type="submit" id="searchsubmit" value="搜索" />
       </div>
      </form>
    
      <div class="caption">
        <a class="logo" href="/" title="A goal is a dream with a deadline..."></a>
        <a class="feedrss" target="_blank" href="http://feed.feedsky.com/ecchanger">Feed Rss</a>
      </div>
      <nav id="navs" class="menu-xu-nav-container">
        <ul id="menu-xu-nav" class="menu">
          <li>
            <a href="/archive">Archive</a>
          </li>
                    <li>
            <a href="/tags">Tags</a>
          </li>
                    <li>
            <a href="/categories">Categories</a>
          </li>
                    <li>
            <a href="/douban">Douban</a>
          </li>
                    
       </ul>
      </nav>
    </header>
    <script type="text/javascript" defer src="/assets/ilost/javascripts/rotation.js"></script>

    <div id="container">
      <article>
        <div class="breadcrumb" itemprop="breadcrumb">
            <a href="/">On The Road</a> &gt; 
            <h2>Blog</h2>
          </div>
        <!-- <section id="post-2945" class="post-2945 post type-post status-publish format-standard hentry category-themes tag-ilost tag-themes tag-wordpress"> -->
<section>
  <div class="title">
    <h2>博客迁移到ruhoh了</h2>
    <small>
      2012-08-20 17:57/ 
      [
      <a href="/categories#Living-ref" title="Living" rel="category tag">Living</a>
]
      <!-- 284 views. -->
    </small>
  </div>
  <div id="postshare">
    <div id="share">
      <div class="sns" style="float:right;">
        <g:plusone size="medium" count="on" href="http://localhost:9292//living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86"></g:plusone>
      </div>
      <span class="share">将本文分享到：</span>
  
      <a href="http://facebook.com/share.php?u=http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86&t=博客迁移到ruhoh了" target="_blank" rel="nofollow" id="facebook-share" title="Facebook">Facebook</a>
  
      <a href="http://twitter.com/share?url=http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86&text=博客迁移到ruhoh了" target="_blank" rel="nofollow" id="twitter-share" title="Twitter">Twitter</a>
  
      <a href="http://delicious.com/post?url=http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86&title=博客迁移到ruhoh了" target="_blank" rel="nofollow" id="delicious-share" title="Delicious">Delicious</a>
  
      <a id="fanfou-share" href="javascript:var d=document,w=window,f='http://fanfou.com/share',l=d.location,e=encodeURIComponent,p='?u='+e(l.href)+'?t='+e(d.title)+'?d='+e(w.getSelection?w.getSelection().toString():d.getSelection?d.getSelection():d.selection.createRange().text)+'?s=bl';if(!w.open(f+'r'+p,'sharer','toolbar=0,status=0,width=600,height=400')){l.href=f+'.new'+p;}void(0)"><img src="http://static.fanfou.com/img/icon.gif" alt="分享到饭否" /></a>
  
      <a href="http://v.t.qq.com/share/share.php?title=博客迁移到ruhoh了&url=http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86&site=http://xcoder.im" target="_blank" rel="nofollow" id="tencent-share" title="腾讯微博">腾讯微博</a>
  
      <a href="http://v.t.sina.com.cn/share/share.php?url=http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86&title=博客迁移到ruhoh了" target="_blank" rel="nofollow" id="sina-share" title="新浪微博">新浪微博</a>
  
      <a href="http://t.163.com/article/user/checkLogin.do?link=http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86source='On The Road'&info=博客迁移到ruhoh了 更新 http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86" target="_blank" rel="nofollow" id="netease-share" title="网易微博">网易微博</a>
      <a href="http://www.kaixin001.com/repaste/share.php?rurl=http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86&rcontent=&rtitle=博客迁移到ruhoh了;" target="_blank" rel="nofollow" id="kaixin001-share" title="开心网">开心网</a>
  
      <script type="text/javascript" src="http://widget.renren.com/js/rrshare.js"></script>
      <a id="renren-share" name="xn_share" onclick="shareClick()" type="icon" href="javascript:;"></a>
      <script type="text/javascript">
          function shareClick() {
              var rrShareParam = {
                  resourceUrl : 'http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86',   //分享的资源Url
                  srcUrl : 'http://xcoder.im',    //分享的资源来源Url,默认为header中的Referer,如果分享失败可以调整此值为resourceUrl试试
                  pic : '',       //分享的主题图片Url
                  title : '博客迁移到ruhoh了',     //分享的标题
                  description : '博客迁移到ruhoh了--来自谢吉宝的博客'    //分享的详细描述
              };
              rrShareOnclick(rrShareParam);
      }
      </script>
  
      <a href="http://www.douban.com/recommend/?url=http://localhost:9292/living/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E5%88%B0ruhoh%E4%BA%86&title=博客迁移到ruhoh了" target="_blank" rel="nofollow" id="douban-share" title="豆瓣">豆瓣</a>
    </div>
  </div>
  <div class="entry">
    <p><img src="/assets/media/img/blog-to-octopress/title.jpg"/></p>

<h3 id="toc_0">ruhoh</h3>

<p>这里<del>也许</del>会成为我第一篇ruhoh的博客，先罗列一下常用的命令吧。</p>

<pre><code>rackup -p 9292  # 启动 web 服务在 9292 端口
ruhoh page about.md  #创建一个页面，支持子目录 
ruhoh post &quot;The Greatest Post Ever&quot; #通过标题创建文章，将会生成 the-greatest-post-ever.md
ruhoh draft #快速建立一个草稿，生成untitled-draft-1.md 
ruhoh titleize #快速为草稿文件命名
</code></pre>

<p>后台</p>

<pre><code>$ uptime
16:23:34 up 126 days,  1:03,  1 user,  load average: `5.09, 2.12, 1.82`

top - 14:05:15 up 341 days, 20:57,  3 users,  load average: 0.02, 0.10, 0.07
Tasks: 146 total,   1 running, 145 sleeping,   0 stopped,   0 zombie
Cpu0  :  0.0%us,  0.0%sy,  0.0%ni, 99.0%id,  1.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu1  :  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu2  :  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu3  :  0.0%us,  0.0%sy,  0.0%ni, 99.7%id,  0.3%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu4  :  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   7864320k total,  3764076k used,  4100244k free,    34132k buffers
Swap:  1052248k total,       84k used,  1052164k free,  1002412k cached

PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
1 root      15   0 10368  684  584 S  0.0  0.0   0:00.95 init
2 root      RT  -5     0    0    0 S  0.0  0.0   3:27.58 migration/0
3 root      34  19     0    0    0 S  0.0  0.0   0:00.50 ksoftirqd/0
4 root      RT  -5     0    0    0 S  0.0  0.0   0:00.00 watchdog/0
5 root      10  -5     0    0    0 S  0.0  0.0   0:00.64 events/0
6 root      10  -5     0    0    0 S  0.0  0.0   0:00.82 khelper
</code></pre>

<p>断断续续用了 ruhoh 已不止一个月了，用的都是些碎片时间，所以进展并没有多少，现在基本完成作为博客的功能，也扩展了 <code>note</code> 和 <code>diary</code> 两个新命令，还非常初步，要完善想必得花不少时间吧，但是我觉得用静态网站生成系统来做个人的文章输出平台是非常值得做的尝试。强大的版本控制；数据安全，纯文件，你可以备份到各个云存储平台，各个git仓库；无网络的时候可以离线编辑和预览；markdown 的易读性；还有十足的可操纵感；当然要享受这些好处的前提就是得有一个折腾得起的心。</p>

<p>ruhoh 效率问题暂且不提，现在内容不多也感觉不出来。部署到虚拟主机可能会是比较麻烦的问题，不过我现在在 webfaction 上用着还是很舒服的。另外 plusjade 还提供免费的主机作为普通的博客用绝对绰绰有余，当然不支持插件。另外部署到其他支持 ruby 云服务平台上应该不会有什么问题，如 Heroku。虚拟主机的话，每次更新都要重新编译再上传数据，想想就害怕。</p>

<p style="float:left;">ruhoh 的扩展设计也不完美，或者我是不能明白，分为 widgets，themes 和 plugins，widgets 定义一些可复用的页面代码块，plugins 则是系统扩展，通过ruby脚本实现，有点像动态网站的后台逻辑部分。而像评论模块、google prettify 这些载入js就可以解决的功能，用 widgets 和 themes 实现就很完美，生成 rss、sitemap 则可以用plugins 单独实现。但是实际用起来发觉这三者之间的耦合太大了，比如本博的 toc 和 fancybox 功能。就必须用 plugins 的自定义转换器，来改动 redcarpet 生成的目标代码。然后又得把那些特定的 js 文件、html 代码块放到 widgets 里面，widgets 和 plugins 紧紧的联系在一起，这样要实现一个功能必须得同时使用 plugins 和 widgets ，这样还不如把前端代码直接放到 themes 里来的清晰。当然啦，像 toc 完全前端实现也是可以的，见：[Generating a Table of Contents in Octopress]。<img src="http://freemind.pluskid.org/att/2012/06/octopress-logo.png" style="float: right;margin-left: 15px;"></p>

<h3 id="toc_1">评论</h3>

<p>静态博客的评论系统只能通过第三方评论系统来实现，ruhoh 是用 widgets 来嵌入第三方评论。內置支持disqus。</p>

<p>我的目的是實現，ruhoh 和  wordpress 的相同篇文章共用一個評論，disqus 提供了這種可能性 <a href="http://help.disqus.com/customer/portal/articles/662547-why-are-the-same-comments-showing-up-on-multiple-pages-">Why are the same comments showing up on multiple pages?</a>。wordpress 的 disqus 插件使用了 文章的 post<em>id 和 guid作爲 disqus\</em>identifier ，模式如下</p>

<pre><code>post_id + &#39; &#39; + guid
</code></pre>

<p>所以在 <a href="https://gist.github.com/3415268">wp<em>to</em>ruhoh</a> 里，我就這兩個屬性也保留下來。但是 ruhoh 的 widget 不能訪問 page 的數據（吭爹呀），見 <a href="https://github.com/ruhoh/ruhoh.rb/issues/52">issue52</a>。所以只能把代碼放到 theme 的 layout 里。如下:</p>

<pre><code>&lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
    /*** CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE ***/
    var disqus_title = &#39;{{page.title}}&#39;;
    var disqus_identifier =&#39;{{page.postid}} {{page.guid}}&#39;;
    var disqus_shortname = &#39;doousblog&#39;; // required: replace example with your forum shortname

    /*** DON&#39;T EDIT BELOW THIS LINE ***/
    (function() {
      var dsq = document.createElement(&#39;script&#39;); dsq.type = &#39;text/javascript&#39;; dsq.async = true;
      dsq.src = &#39;http://&#39; + disqus_shortname + &#39;.disqus.com/embed.js&#39;;
      (document.getElementsByTagName(&#39;head&#39;)[0] || document.getElementsByTagName(&#39;body&#39;)[0]).appendChild(dsq);
    })();
&lt;/script&gt;
&lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;http://disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;
&lt;a href=&quot;http://disqus.com&quot; class=&quot;dsq-brlink&quot;&gt;comments
    powered by &lt;span class=&quot;logo-disqus&quot;&gt;Disqus&lt;/span&gt;&lt;/a&gt;
</code></pre>

<p>另外，对于 ruhoh 的 post ，如果不想以后换个标题，或者换个域名，都要重新整合评论，最好每篇文章提供一个 unique id 作为 disque_indentifier 使用。post 已经有 id 属性了，用的是相对的文件路径。</p>

<h3 id="toc_2">主题</h3>

<p>关于主题，折騰了幾下，感覺目前我弄的這個主題，並不能發揮bootstrap作爲脚手架的能力，用它的栅格系统总是不能把边栏设计地让人满意。不過响应式布局（responsive）這個特性實在太強了，基本可以保證在不同分辨率的設備上都可以保持比較好的閱讀體驗，不过我分别实现了两个导航栏对应移动设备和pc，从语义上讲这个做法非常糟糕。不過單單用 bootstrap 的那些小工具也非常值得，bootstrap 的設計真的很漂亮，像我這種沒有前端經驗的碼農，也可以用的很舒服。</p>

<p>特别遗憾的就是主題左邊那個固定的導航欄不能利用到bootstrap的栅格系统，只能用原來那種方法。</p>

<p>主题的设计偷着下面的这些网站，说好听就是参考了-_-，肯定不止这些的只是我确实想不起来了。</p>

<ul>
<li><a href="http://www.sitepoint.com/pure-css3-paper-curl/">http://www.sitepoint.com/pure-css3-paper-curl/</a></li>
<li><a href="http://yihui.name/cn/">http://yihui.name/cn/</a></li>
<li><a href="http://freemind.pluskid.org">http://freemind.pluskid.org</a></li>
</ul>

<p>相比 wordpress 那未完成的主题，主颜色换成蓝色，去掉了圆角，背景多了些阴影。感觉还不错。</p>

<p>另外还用了下面这些工具，</p>

<ul>
<li><a href="http://dublue.com/plugins/toc/">http://dublue.com/plugins/toc/</a></li>
<li><a href="http://www.appelsiini.net/projects/lazyload">http://www.appelsiini.net/projects/lazyload</a></li>
<li><a href="http://fancyapps.com/fancybox/">http://fancyapps.com/fancybox/</a></li>
<li><a href="http://ajaxload.info/">http://ajaxload.info/</a> </li>
</ul>

<p>也没办法一一列举了。</p>

<p>这个 ruhoh 主题可以在这里找到： <a href="https://github.com/douo/douo.ruhoh.com/tree/master/themes/moon">Moon</a></p>

<h3 id="toc_3">mustache</h3>

<p>一个Logic Less（不知道怎么翻译，目的大概是把逻辑还给代码，让模板保持简
洁。见<a href="http://stackoverflow.com/questions/3896730/whats-the-advantage-of-logic-less-template-such-as-mustache">stackoverflow</a>）的模板语言，所以同样以语言无关为目标的 ruhoh
采用了它作为模板语言。参考它的 <a href="http://mustache.github.com/#demo">demo</a> 可以大致了解它的特性，也可以参
考一下<a href="/notes/coding/mustache">我的笔记</a>。</p>

<h3 id="toc_4">Markdown</h3>

<p>用了一段時間的 Markdown ，發現 Markdown 主要的缺陷就是太簡單了，優點也是太簡單了，真是矛盾。</p>

<p>折腾一个主题基本上不能回避对  markdown 的转换器做一些改动。幸好 redcarpet 扩展起来十分方便。不过这样就牺牲默认用底层语言实现的转换器的效率。另外万不得已的时候决不对 Markdown 的语法进行扩展，优先用一些现成的扩展版本，幸好现在还不需要到这一步。之前考虑过换一些更强大的标记语言，不过现在看起来还没这个必要放棄 Markdown ，Markdown 很簡潔很漂亮，而且那些简化也是有它的道理的，觉得不爽的时候，还是先坚持一下。</p>

<p>这里有其他同学對Markdown的批評:</p>

<ul>
<li> <a href="http://blog.liancheng.info//why-i-hate-markdown">Why I hate Markdown (and prefer reST)</a></li>
<li> <a href="http://freemind.pluskid.org/technology/the-unbearable-madness-of-static-blog-generators">The Unbearable Madness of Static Blog Generators</a></li>
</ul>

<p>不过 Markdown 的转义让人抓狂</p>

<p>pandoc 增强的 Markdown 语法 <a href="http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html">http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html</a> </p>

<h3 id="toc_5">RSS &amp; Sitemap</h3>

<p>RSS 和 Sitemap 基本上是每个博客都必备的了。新版的ruhoh 已经内置 rss 生成插件，但是这个插件有不少问题，我参考了wordpress 的 rss 改进了一下，见 <a href="https://gist.github.com/3736010">rss.rb</a>，rss的标准没有详细了解，希望实现不要不伦不类。</p>

<p>Sitemap 生成我用的是<a href="https://github.com/crhan">crchan</a>的<a href="https://gist.github.com/3705998">Ruhoh Sitemap Generator</a>，根据wordpress的Sitemap做了一些做了些改动：<a href="https://gist.github.com/3736089">改动版</a></p>

<h3 id="toc_6">搬家</h3>

<p>最后说说搬家，事实证明，想要无痛地将 wordpress 的文章转换到 ruhoh 上是件十分痛苦的事。折腾 ruhoh 有不少时间就是在折腾这个转换脚本。不过现在这个脚本基本上可以完成 90% 的转换工作，包括将文章转换为 markdown 格式，感谢 pandoc 。不过还是做了不少 hack。最折腾人的就是 codecolorer 这货，短标签，长标签，各种混用，太可怕了，差点想重新实现它的引擎，最后当然还是放弃，用人工修改一些例外，像是这篇文章：<a href="/2010/08/03/codecolorer-doc-cn">CodeColorer中文帮助</a></p>

<p>脚本由Jekyll 的wordpressdotcom 修改而来，根据我的博客做了很多针对性的hack，可能没有什么适用性。脚本可以在这里找到： <a href="https://gist.github.com/3415268">wp<em>to</em>ruhoh</a></p>

<h3 id="toc_7">部署</h3>

<p>webfaction 真心不错。给 git 加个钩子，用 post-receive 解决全部问题</p>

<pre><code class="bash">#!/bin/bash

HOME=/home/xxx
LOG=$HOME/ruhoh.log
BUILD_DIR=$HOME/tmp/
SITE_DIR=$BUILD_DIR/compiled/
DEPLOY_DIR=$HOME/deploy/
source $HOME/.rvm/scripts/rvm
date &gt;&gt;  $LOG 
unset GIT_DIR
cd $BUILD_DIR
PATH=$HOME/douo-ruhoh/bin:$PATH  #use custom ruhoh to compile
#echo $PATH &gt;&gt;  $LOG
git pull  &gt;&gt;  $LOG
which ruhoh &gt;&gt; $LOG
ruhoh compile &gt;&gt; $LOG
rsync -a --delete-after $SITE_DIR $DEPLOY_DIR &gt;&gt;  $LOG
</code></pre>

<h3 id="toc_8">其他</h3>

<h4 id="toc_9">Mathjax</h4>

<p>Mathjax的使用非常方便，直接在頁面嵌入腳本就行，然後通過一個 widgets 來載入 mathjax 的腳本。就可以展示公式了。关键是如何定义插入公式的语法，刚好 plusjade 扩展一下转换器插件实现了这个語法：<a href="https://gist.github.com/2699636">mathjax.rb</a>。</p>

<pre><code class="mathjax">e^{i\pi} + 1 = 0
</code></pre>

<p>我考虑是否要为页面加入一个Mathjax开关，因为大部分博文都无需用到Mathjax。
另外，Mathjax 好像会不定时的出现一些布局错乱的问题。</p>

<h4 id="toc_10">自动刷新</h4>

<p>看了 pluskid 的<a href="http://freemind.pluskid.org/technology/the-unbearable-madness-of-static-blog-generators/">文章</a>，我也跟着实现了保存的时候自动刷新页面。需要安装几个东西</p>

<ul>
<li><a href="https://github.com/guard/guard">guard</a></li>
<li><a href="https://github.com/johnbintz/rack-livereload">rack-livereload</a></li>
<li><a href="https://github.com/guard/guard-livereload">guard-livereload</a></li>
</ul>

<p><a href="https://github.com/guard/guard">guard</a>是一个监听文件系统变动的工具，<a href="https://github.com/johnbintz/rack-livereload">rack-livereload</a> 实现了自动刷新。安装和使用看一下各自的 readme 还是很容易明白的，但具体怎么工作我也没弄清楚，反正不用改动ruhoh的一个代码，很方便。不过我在 windows 下安装 <a href="https://github.com/guard/guard-livereload">guard-livereload</a> 出了问题，原因是EventMachine 0.12.10 不能在跑着 ruy 1.9.2+ 的windows上工作。用 pre-release 的版本就可以解决问题，讨论在<a href="http://stackoverflow.com/questions/6927907/ruby-problem-installing-eventmachine-under-windows-7#">stackoverflow</a> 上。</p>

<pre><code>gem install eventmachine --pre
</code></pre>

<p>今天发现 guard 这货在 win7 cygwin 下进程占用CPU 100%，不知道是什么情况。</p>

<h4 id="toc_11">TODO</h4>

<p>接下来完善笔记功能，打造出一个知识管理系统（类wiki），还有日记，因为要作为日记使用，还需要提供类似 evernote 的加密方案。</p>

<p>好多呀~ 好困。 </p>

<h3 id="toc_12">ruhoh</h3>

<p>这里<del>也许</del>会成为我第一篇ruhoh的博客，先罗列一下常用的命令吧。</p>

<pre><code>rackup -p 9292  # 启动 web 服务在 9292 端口
ruhoh page about.md  #创建一个页面，支持子目录 
ruhoh post &quot;The Greatest Post Ever&quot; #通过标题创建文章，将会生成 the-greatest-post-ever.md
ruhoh draft #快速建立一个草稿，生成untitled-draft-1.md 
ruhoh titleize #快速为草稿文件命名
</code></pre>

<p>后台</p>

<pre><code>http://localhost:9292/dash
</code></pre>

<p>断断续续用了 ruhoh 已不止一个月了，用的都是些碎片时间，所以进展并没有多少，现在基本完成作为博客的功能，也扩展了 <code>note</code> 和 <code>diary</code> 两个新命令，还非常初步，要完善想必得花不少时间吧，但是我觉得用静态网站生成系统来做个人的文章输出平台是非常值得做的尝试。强大的版本控制；数据安全，纯文件，你可以备份到各个云存储平台，各个git仓库；无网络的时候可以离线编辑和预览；markdown 的易读性；还有十足的可操纵感；当然要享受这些好处的前提就是得有一个折腾得起的心。</p>

<p>ruhoh 效率问题暂且不提，现在内容不多也感觉不出来。部署到虚拟主机可能会是比较麻烦的问题，不过我现在在 webfaction 上用着还是很舒服的。另外 plusjade 还提供免费的主机作为普通的博客用绝对绰绰有余，当然不支持插件。另外部署到其他支持 ruby 云服务平台上应该不会有什么问题，如 Heroku。虚拟主机的话，每次更新都要重新编译再上传数据，想想就害怕。</p>

<p>ruhoh 的扩展设计也不完美，或者我是不能明白，分为 widgets，themes 和 plugins，widgets 定义一些可复用的页面代码块，plugins 则是系统扩展，通过ruby脚本实现，有点像动态网站的后台逻辑部分。而像评论模块、google prettify 这些载入js就可以解决的功能，用 widgets 和 themes 实现就很完美，生成 rss、sitemap 则可以用plugins 单独实现。但是实际用起来发觉这三者之间的耦合太大了，比如本博的 toc 和 fancybox 功能。就必须用 plugins 的自定义转换器，来改动 redcarpet 生成的目标代码。然后又得把那些特定的 js 文件、html 代码块放到 widgets 里面，widgets 和 plugins 紧紧的联系在一起，这样要实现一个功能必须得同时使用 plugins 和 widgets ，这样还不如把前端代码直接放到 themes 里来的清晰。当然啦，像 toc 完全前端实现也是可以的，见：<a href="http://brizzled.clapper.org/blog/2012/02/04/generating-a-table-of-contents-in-octopress/">Generating a Table of Contents in Octopress</a>。</p>

<h3 id="toc_13">评论</h3>

<p>静态博客的评论系统只能通过第三方评论系统来实现，ruhoh 是用 widgets 来嵌入第三方评论。內置支持disqus。</p>

<p>我的目的是實現，ruhoh 和  wordpress 的相同篇文章共用一個評論，disqus 提供了這種可能性 <a href="http://help.disqus.com/customer/portal/articles/662547-why-are-the-same-comments-showing-up-on-multiple-pages-">Why are the same comments showing up on multiple pages?</a>。wordpress 的 disqus 插件使用了 文章的 post<em>id 和 guid作爲 disqus\</em>identifier ，模式如下</p>

<pre><code>post_id + &#39; &#39; + guid
</code></pre>

<p>所以在 <a href="https://gist.github.com/3415268">wp<em>to</em>ruhoh</a> 里，我就這兩個屬性也保留下來。但是 ruhoh 的 widget 不能訪問 page 的數據（吭爹呀），見 <a href="https://github.com/ruhoh/ruhoh.rb/issues/52">issue52</a>。所以只能把代碼放到 theme 的 layout 里。如下:</p>

<pre><code>&lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO
        YOUR WEBPAGE * * */
            var disqus_title = &#39;{{page.title}}&#39;;
            var disqus_identifier =&#39;{{page.postid}} {{page.guid}}&#39;;
            var disqus_shortname = &#39;doousblog&#39;; // required: replace example with your forum shortname

            /* * * DON&#39;T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement(&#39;script&#39;); dsq.type = &#39;text/javascript&#39;; dsq.async = true;
                dsq.src = &#39;http://&#39; + disqus_shortname + &#39;.disqus.com/embed.js&#39;;
                (document.getElementsByTagName(&#39;head&#39;)[0] || document.getElementsByTagName(&#39;body&#39;)[0]).appendChild(dsq);
            })();
        &lt;/script&gt;
        &lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;http://disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;
        &lt;a href=&quot;http://disqus.com&quot; class=&quot;dsq-brlink&quot;&gt;comments
            powered by &lt;span class=&quot;logo-disqus&quot;&gt;Disqus&lt;/span&gt;&lt;/a&gt;
</code></pre>

<p>另外，对于 ruhoh 的 post ，如果不想以后换个标题，或者换个域名，都要重新整合评论，最好每篇文章提供一个 unique id 作为 disque_indentifier 使用。post 已经有 id 属性了，用的是相对的文件路径。</p>

<h3 id="toc_14">主题</h3>

<p>关于主题，折騰了幾下，感覺目前我弄的這個主題，並不能發揮bootstrap作爲脚手架的能力，用它的栅格系统总是不能把边栏设计地让人满意。不過响应式布局（responsive）這個特性實在太強了，基本可以保證在不同分辨率的設備上都可以保持比較好的閱讀體驗，不过我分别实现了两个导航栏对应移动设备和pc，从语义上讲这个做法非常糟糕。不過單單用 bootstrap 的那些小工具也非常值得，bootstrap 的設計真的很漂亮，像我這種沒有前端經驗的碼農，也可以用的很舒服。</p>

<p>特别遗憾的就是主題左邊那個固定的導航欄不能利用到bootstrap的栅格系统，只能用原來那種方法。</p>

<p>主题的设计偷着下面的这些网站，说好听就是参考了-_-，肯定不止这些的只是我确实想不起来了。</p>

<ul>
<li><a href="http://www.sitepoint.com/pure-css3-paper-curl/">http://www.sitepoint.com/pure-css3-paper-curl/</a></li>
<li><a href="http://yihui.name/cn/">http://yihui.name/cn/</a></li>
<li><a href="http://freemind.pluskid.org">http://freemind.pluskid.org</a></li>
</ul>

<p>相比 wordpress 那未完成的主题，主颜色换成蓝色，去掉了圆角，背景多了些阴影。感觉还不错。</p>

<p>另外还用了下面这些工具，</p>

<ul>
<li><a href="http://dublue.com/plugins/toc/">http://dublue.com/plugins/toc/</a></li>
<li><a href="http://www.appelsiini.net/projects/lazyload">http://www.appelsiini.net/projects/lazyload</a></li>
<li><a href="http://fancyapps.com/fancybox/">http://fancyapps.com/fancybox/</a></li>
<li><a href="http://ajaxload.info/">http://ajaxload.info/</a> </li>
</ul>

<p>也没办法一一列举了。</p>

<p>这个 ruhoh 主题可以在这里找到： <a href="https://github.com/douo/douo.ruhoh.com/tree/master/themes/moon">Moon</a></p>

<h3 id="toc_15">mustache</h3>

<p>一个Logic Less（不知道怎么翻译，目的大概是把逻辑还给代码，让模板保持简
洁。见<a href="http://stackoverflow.com/questions/3896730/whats-the-advantage-of-logic-less-template-such-as-mustache">stackoverflow</a>）的模板语言，所以同样以语言无关为目标的 ruhoh
采用了它作为模板语言。参考它的 <a href="http://mustache.github.com/#demo">demo</a> 可以大致了解它的特性，也可以参
考一下<a href="/notes/coding/mustache">我的笔记</a>。</p>

<h3 id="toc_16">Markdown</h3>

<p>用了一段時間的 Markdown ，發現 Markdown 主要的缺陷就是太簡單了，優點也是太簡單了，真是矛盾。</p>

<p>折腾一个主题基本上不能回避对  markdown 的转换器做一些改动。幸好 redcarpet 扩展起来十分方便。不过这样就牺牲默认用底层语言实现的转换器的效率。另外万不得已的时候决不对 Markdown 的语法进行扩展，优先用一些现成的扩展版本，幸好现在还不需要到这一步。之前考虑过换一些更强大的标记语言，不过现在看起来还没这个必要放棄 Markdown ，Markdown 很簡潔很漂亮，而且那些简化也是有它的道理的，觉得不爽的时候，还是先坚持一下。</p>

<p>这里有其他同学對Markdown的批評:</p>

<ul>
<li> <a href="http://blog.liancheng.info//why-i-hate-markdown">Why I hate Markdown (and prefer reST)</a></li>
<li> <a href="http://freemind.pluskid.org/technology/the-unbearable-madness-of-static-blog-generators">The Unbearable Madness of Static Blog Generators</a></li>
</ul>

<p>不过 Markdown 的转义让人抓狂</p>

<p>pandoc 增强的 Markdown 语法 <a href="http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html">http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html</a> </p>

<h3 id="toc_17">RSS &amp; Sitemap</h3>

<p>RSS 和 Sitemap 基本上是每个博客都必备的了。新版的ruhoh 已经内置 rss 生成插件，但是这个插件有不少问题，我参考了wordpress 的 rss 改进了一下，见 <a href="https://gist.github.com/3736010">rss.rb</a>，rss的标准没有详细了解，希望实现不要不伦不类。</p>

<p>Sitemap 生成我用的是<a href="https://github.com/crhan">crchan</a>的<a href="https://gist.github.com/3705998">Ruhoh Sitemap Generator</a>，根据wordpress的Sitemap做了一些做了些改动：<a href="https://gist.github.com/3736089">改动版</a></p>

<h3 id="toc_18">搬家</h3>

<p>最后说说搬家，事实证明，想要无痛地将 wordpress 的文章转换到 ruhoh 上是件十分痛苦的事。折腾 ruhoh 有不少时间就是在折腾这个转换脚本。不过现在这个脚本基本上可以完成 90% 的转换工作，包括将文章转换为 markdown 格式，感谢 pandoc 。不过还是做了不少 hack。最折腾人的就是 codecolorer 这货，短标签，长标签，各种混用，太可怕了，差点想重新实现它的引擎，最后当然还是放弃，用人工修改一些例外，像是这篇文章：<a href="/2010/08/03/codecolorer-doc-cn">CodeColorer中文帮助</a></p>

<p>脚本由Jekyll 的wordpressdotcom 修改而来，根据我的博客做了很多针对性的hack，可能没有什么适用性。脚本可以在这里找到： <a href="https://gist.github.com/3415268">wp<em>to</em>ruhoh</a></p>

<h3 id="toc_19">部署</h3>

<p>webfaction 真心不错。给 git 加个钩子，用 post-receive 解决全部问题</p>

<pre><code class="bash">#!/bin/bash

HOME=/home/xxx
LOG=$HOME/ruhoh.log
BUILD_DIR=$HOME/tmp/
SITE_DIR=$BUILD_DIR/compiled/
DEPLOY_DIR=$HOME/deploy/
source $HOME/.rvm/scripts/rvm
date &gt;&gt;  $LOG 
unset GIT_DIR
cd $BUILD_DIR
PATH=$HOME/douo-ruhoh/bin:$PATH  #use custom ruhoh to compile
#echo $PATH &gt;&gt;  $LOG
git pull  &gt;&gt;  $LOG
which ruhoh &gt;&gt; $LOG
ruhoh compile &gt;&gt; $LOG
rsync -a --delete-after $SITE_DIR $DEPLOY_DIR &gt;&gt;  $LOG
</code></pre>

<h3 id="toc_20">其他</h3>

<h4 id="toc_21">Mathjax</h4>

<p>Mathjax的使用非常方便，直接在頁面嵌入腳本就行，然後通過一個 widgets 來載入 mathjax 的腳本。就可以展示公式了。关键是如何定义插入公式的语法，刚好 plusjade 扩展一下转换器插件实现了这个語法：<a href="https://gist.github.com/2699636">mathjax.rb</a>。</p>

<pre><code class="mathjax">e^{i\pi} + 1 = 0
</code></pre>

<p>我考虑是否要为页面加入一个Mathjax开关，因为大部分博文都无需用到Mathjax。
另外，Mathjax 好像会不定时的出现一些布局错乱的问题。</p>

<h4 id="toc_22">自动刷新</h4>

<p>看了 pluskid 的<a href="http://freemind.pluskid.org/technology/the-unbearable-madness-of-static-blog-generators/">文章</a>，我也跟着实现了保存的时候自动刷新页面。需要安装几个东西</p>

<ul>
<li><a href="https://github.com/guard/guard">guard</a></li>
<li><a href="https://github.com/johnbintz/rack-livereload">rack-livereload</a></li>
<li><a href="https://github.com/guard/guard-livereload">guard-livereload</a></li>
</ul>

<p><a href="https://github.com/guard/guard">guard</a>是一个监听文件系统变动的工具，<a href="https://github.com/johnbintz/rack-livereload">rack-livereload</a> 实现了自动刷新。安装和使用看一下各自的 readme 还是很容易明白的，但具体怎么工作我也没弄清楚，反正不用改动ruhoh的一个代码，很方便。不过我在 windows 下安装 <a href="https://github.com/guard/guard-livereload">guard-livereload</a> 出了问题，原因是EventMachine 0.12.10 不能在跑着 ruy 1.9.2+ 的windows上工作。用 pre-release 的版本就可以解决问题，讨论在<a href="http://stackoverflow.com/questions/6927907/ruby-problem-installing-eventmachine-under-windows-7#">stackoverflow</a> 上。</p>

<pre><code>gem install eventmachine --pre
</code></pre>

<p>今天发现 guard 这货在 win7 cygwin 下进程占用CPU 100%，不知道是什么情况。</p>

<h4 id="toc_23">TODO</h4>

<p>接下来完善笔记功能，打造出一个知识管理系统（类wiki），还有日记，因为要作为日记使用，还需要提供类似 evernote 的加密方案。</p>

<p>好多呀~ 好困。 </p>

<h3 id="toc_24">ruhoh</h3>

<p>这里<del>也许</del>会成为我第一篇ruhoh的博客，先罗列一下常用的命令吧。</p>

<pre><code>rackup -p 9292  # 启动 web 服务在 9292 端口
ruhoh page about.md  #创建一个页面，支持子目录 
ruhoh post &quot;The Greatest Post Ever&quot; #通过标题创建文章，将会生成 the-greatest-post-ever.md
ruhoh draft #快速建立一个草稿，生成untitled-draft-1.md 
ruhoh titleize #快速为草稿文件命名
</code></pre>

<p>后台</p>

<pre><code>http://localhost:9292/dash
</code></pre>

<p>断断续续用了 ruhoh 已不止一个月了，用的都是些碎片时间，所以进展并没有多少，现在基本完成作为博客的功能，也扩展了 <code>note</code> 和 <code>diary</code> 两个新命令，还非常初步，要完善想必得花不少时间吧，但是我觉得用静态网站生成系统来做个人的文章输出平台是非常值得做的尝试。强大的版本控制；数据安全，纯文件，你可以备份到各个云存储平台，各个git仓库；无网络的时候可以离线编辑和预览；markdown 的易读性；还有十足的可操纵感；当然要享受这些好处的前提就是得有一个折腾得起的心。</p>

<p>ruhoh 效率问题暂且不提，现在内容不多也感觉不出来。部署到虚拟主机可能会是比较麻烦的问题，不过我现在在 webfaction 上用着还是很舒服的。另外 plusjade 还提供免费的主机作为普通的博客用绝对绰绰有余，当然不支持插件。另外部署到其他支持 ruby 云服务平台上应该不会有什么问题，如 Heroku。虚拟主机的话，每次更新都要重新编译再上传数据，想想就害怕。</p>

<p>ruhoh 的扩展设计也不完美，或者我是不能明白，分为 widgets，themes 和 plugins，widgets 定义一些可复用的页面代码块，plugins 则是系统扩展，通过ruby脚本实现，有点像动态网站的后台逻辑部分。而像评论模块、google prettify 这些载入js就可以解决的功能，用 widgets 和 themes 实现就很完美，生成 rss、sitemap 则可以用plugins 单独实现。但是实际用起来发觉这三者之间的耦合太大了，比如本博的 toc 和 fancybox 功能。就必须用 plugins 的自定义转换器，来改动 redcarpet 生成的目标代码。然后又得把那些特定的 js 文件、html 代码块放到 widgets 里面，widgets 和 plugins 紧紧的联系在一起，这样要实现一个功能必须得同时使用 plugins 和 widgets ，这样还不如把前端代码直接放到 themes 里来的清晰。当然啦，像 toc 完全前端实现也是可以的，见：<a href="http://brizzled.clapper.org/blog/2012/02/04/generating-a-table-of-contents-in-octopress/">Generating a Table of Contents in Octopress</a>。</p>

<h3 id="toc_25">评论</h3>

<p>静态博客的评论系统只能通过第三方评论系统来实现，ruhoh 是用 widgets 来嵌入第三方评论。內置支持disqus。</p>

<p>我的目的是實現，ruhoh 和  wordpress 的相同篇文章共用一個評論，disqus 提供了這種可能性 <a href="http://help.disqus.com/customer/portal/articles/662547-why-are-the-same-comments-showing-up-on-multiple-pages-">Why are the same comments showing up on multiple pages?</a>。wordpress 的 disqus 插件使用了 文章的 post<em>id 和 guid作爲 disqus\</em>identifier ，模式如下</p>

<pre><code>post_id + &#39; &#39; + guid
</code></pre>

<p>所以在 <a href="https://gist.github.com/3415268">wp<em>to</em>ruhoh</a> 里，我就這兩個屬性也保留下來。但是 ruhoh 的 widget 不能訪問 page 的數據（吭爹呀），見 <a href="https://github.com/ruhoh/ruhoh.rb/issues/52">issue52</a>。所以只能把代碼放到 theme 的 layout 里。如下:</p>

<pre><code>&lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO
        YOUR WEBPAGE * * */
            var disqus_title = &#39;{{page.title}}&#39;;
            var disqus_identifier =&#39;{{page.postid}} {{page.guid}}&#39;;
            var disqus_shortname = &#39;doousblog&#39;; // required: replace example with your forum shortname

            /* * * DON&#39;T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement(&#39;script&#39;); dsq.type = &#39;text/javascript&#39;; dsq.async = true;
                dsq.src = &#39;http://&#39; + disqus_shortname + &#39;.disqus.com/embed.js&#39;;
                (document.getElementsByTagName(&#39;head&#39;)[0] || document.getElementsByTagName(&#39;body&#39;)[0]).appendChild(dsq);
            })();
        &lt;/script&gt;
        &lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;http://disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;
        &lt;a href=&quot;http://disqus.com&quot; class=&quot;dsq-brlink&quot;&gt;comments
            powered by &lt;span class=&quot;logo-disqus&quot;&gt;Disqus&lt;/span&gt;&lt;/a&gt;
</code></pre>

<p>另外，对于 ruhoh 的 post ，如果不想以后换个标题，或者换个域名，都要重新整合评论，最好每篇文章提供一个 unique id 作为 disque_indentifier 使用。post 已经有 id 属性了，用的是相对的文件路径。</p>

<h3 id="toc_26">主题</h3>

<p>关于主题，折騰了幾下，感覺目前我弄的這個主題，並不能發揮bootstrap作爲脚手架的能力，用它的栅格系统总是不能把边栏设计地让人满意。不過响应式布局（responsive）這個特性實在太強了，基本可以保證在不同分辨率的設備上都可以保持比較好的閱讀體驗，不过我分别实现了两个导航栏对应移动设备和pc，从语义上讲这个做法非常糟糕。不過單單用 bootstrap 的那些小工具也非常值得，bootstrap 的設計真的很漂亮，像我這種沒有前端經驗的碼農，也可以用的很舒服。</p>

<p>特别遗憾的就是主題左邊那個固定的導航欄不能利用到bootstrap的栅格系统，只能用原來那種方法。</p>

<p>主题的设计偷着下面的这些网站，说好听就是参考了-_-，肯定不止这些的只是我确实想不起来了。</p>

<ul>
<li><a href="http://www.sitepoint.com/pure-css3-paper-curl/">http://www.sitepoint.com/pure-css3-paper-curl/</a></li>
<li><a href="http://yihui.name/cn/">http://yihui.name/cn/</a></li>
<li><a href="http://freemind.pluskid.org">http://freemind.pluskid.org</a></li>
</ul>

<p>相比 wordpress 那未完成的主题，主颜色换成蓝色，去掉了圆角，背景多了些阴影。感觉还不错。</p>

<p>另外还用了下面这些工具，</p>

<ul>
<li><a href="http://dublue.com/plugins/toc/">http://dublue.com/plugins/toc/</a></li>
<li><a href="http://www.appelsiini.net/projects/lazyload">http://www.appelsiini.net/projects/lazyload</a></li>
<li><a href="http://fancyapps.com/fancybox/">http://fancyapps.com/fancybox/</a></li>
<li><a href="http://ajaxload.info/">http://ajaxload.info/</a> </li>
</ul>

<p>也没办法一一列举了。</p>

<p>这个 ruhoh 主题可以在这里找到： <a href="https://github.com/douo/douo.ruhoh.com/tree/master/themes/moon">Moon</a></p>

<h3 id="toc_27">mustache</h3>

<p>一个Logic Less（不知道怎么翻译，目的大概是把逻辑还给代码，让模板保持简
洁。见<a href="http://stackoverflow.com/questions/3896730/whats-the-advantage-of-logic-less-template-such-as-mustache">stackoverflow</a>）的模板语言，所以同样以语言无关为目标的 ruhoh
采用了它作为模板语言。参考它的 <a href="http://mustache.github.com/#demo">demo</a> 可以大致了解它的特性，也可以参
考一下<a href="/notes/coding/mustache">我的笔记</a>。</p>

<h3 id="toc_28">Markdown</h3>

<p>用了一段時間的 Markdown ，發現 Markdown 主要的缺陷就是太簡單了，優點也是太簡單了，真是矛盾。</p>

<p>折腾一个主题基本上不能回避对  markdown 的转换器做一些改动。幸好 redcarpet 扩展起来十分方便。不过这样就牺牲默认用底层语言实现的转换器的效率。另外万不得已的时候决不对 Markdown 的语法进行扩展，优先用一些现成的扩展版本，幸好现在还不需要到这一步。之前考虑过换一些更强大的标记语言，不过现在看起来还没这个必要放棄 Markdown ，Markdown 很簡潔很漂亮，而且那些简化也是有它的道理的，觉得不爽的时候，还是先坚持一下。</p>

<p>这里有其他同学對Markdown的批評:</p>

<ul>
<li> <a href="http://blog.liancheng.info//why-i-hate-markdown">Why I hate Markdown (and prefer reST)</a></li>
<li> <a href="http://freemind.pluskid.org/technology/the-unbearable-madness-of-static-blog-generators">The Unbearable Madness of Static Blog Generators</a></li>
</ul>

<p>不过 Markdown 的转义让人抓狂</p>

<p>pandoc 增强的 Markdown 语法 <a href="http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html">http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html</a> </p>

<h3 id="toc_29">RSS &amp; Sitemap</h3>

<p>RSS 和 Sitemap 基本上是每个博客都必备的了。新版的ruhoh 已经内置 rss 生成插件，但是这个插件有不少问题，我参考了wordpress 的 rss 改进了一下，见 <a href="https://gist.github.com/3736010">rss.rb</a>，rss的标准没有详细了解，希望实现不要不伦不类。</p>

<p>Sitemap 生成我用的是<a href="https://github.com/crhan">crchan</a>的<a href="https://gist.github.com/3705998">Ruhoh Sitemap Generator</a>，根据wordpress的Sitemap做了一些做了些改动：<a href="https://gist.github.com/3736089">改动版</a></p>

<h3 id="toc_30">搬家</h3>

<p>最后说说搬家，事实证明，想要无痛地将 wordpress 的文章转换到 ruhoh 上是件十分痛苦的事。折腾 ruhoh 有不少时间就是在折腾这个转换脚本。不过现在这个脚本基本上可以完成 90% 的转换工作，包括将文章转换为 markdown 格式，感谢 pandoc 。不过还是做了不少 hack。最折腾人的就是 codecolorer 这货，短标签，长标签，各种混用，太可怕了，差点想重新实现它的引擎，最后当然还是放弃，用人工修改一些例外，像是这篇文章：<a href="/2010/08/03/codecolorer-doc-cn">CodeColorer中文帮助</a></p>

<p>脚本由Jekyll 的wordpressdotcom 修改而来，根据我的博客做了很多针对性的hack，可能没有什么适用性。脚本可以在这里找到： <a href="https://gist.github.com/3415268">wp<em>to</em>ruhoh</a></p>

<h3 id="toc_31">部署</h3>

<p>webfaction 真心不错。给 git 加个钩子，用 post-receive 解决全部问题</p>

<pre><code class="bash">#!/bin/bash

HOME=/home/xxx
LOG=$HOME/ruhoh.log
BUILD_DIR=$HOME/tmp/
SITE_DIR=$BUILD_DIR/compiled/
DEPLOY_DIR=$HOME/deploy/
source $HOME/.rvm/scripts/rvm
date &gt;&gt;  $LOG 
unset GIT_DIR
cd $BUILD_DIR
PATH=$HOME/douo-ruhoh/bin:$PATH  #use custom ruhoh to compile
#echo $PATH &gt;&gt;  $LOG
git pull  &gt;&gt;  $LOG
which ruhoh &gt;&gt; $LOG
ruhoh compile &gt;&gt; $LOG
rsync -a --delete-after $SITE_DIR $DEPLOY_DIR &gt;&gt;  $LOG
</code></pre>

<h3 id="toc_32">其他</h3>

<h4 id="toc_33">Mathjax</h4>

<p>Mathjax的使用非常方便，直接在頁面嵌入腳本就行，然後通過一個 widgets 來載入 mathjax 的腳本。就可以展示公式了。关键是如何定义插入公式的语法，刚好 plusjade 扩展一下转换器插件实现了这个語法：<a href="https://gist.github.com/2699636">mathjax.rb</a>。</p>

<pre><code class="mathjax">e^{i\pi} + 1 = 0
</code></pre>

<p>我考虑是否要为页面加入一个Mathjax开关，因为大部分博文都无需用到Mathjax。
另外，Mathjax 好像会不定时的出现一些布局错乱的问题。</p>

<h4 id="toc_34">自动刷新</h4>

<p>看了 pluskid 的<a href="http://freemind.pluskid.org/technology/the-unbearable-madness-of-static-blog-generators/">文章</a>，我也跟着实现了保存的时候自动刷新页面。需要安装几个东西</p>

<ul>
<li><a href="https://github.com/guard/guard">guard</a></li>
<li><a href="https://github.com/johnbintz/rack-livereload">rack-livereload</a></li>
<li><a href="https://github.com/guard/guard-livereload">guard-livereload</a></li>
</ul>

<p><a href="https://github.com/guard/guard">guard</a>是一个监听文件系统变动的工具，<a href="https://github.com/johnbintz/rack-livereload">rack-livereload</a> 实现了自动刷新。安装和使用看一下各自的 readme 还是很容易明白的，但具体怎么工作我也没弄清楚，反正不用改动ruhoh的一个代码，很方便。不过我在 windows 下安装 <a href="https://github.com/guard/guard-livereload">guard-livereload</a> 出了问题，原因是EventMachine 0.12.10 不能在跑着 ruy 1.9.2+ 的windows上工作。用 pre-release 的版本就可以解决问题，讨论在<a href="http://stackoverflow.com/questions/6927907/ruby-problem-installing-eventmachine-under-windows-7#">stackoverflow</a> 上。</p>

<pre><code>gem install eventmachine --pre
</code></pre>

<p>今天发现 guard 这货在 win7 cygwin 下进程占用CPU 100%，不知道是什么情况。</p>

<h4 id="toc_35">TODO</h4>

<p>接下来完善笔记功能，打造出一个知识管理系统（类wiki），还有日记，因为要作为日记使用，还需要提供类似 evernote 的加密方案。</p>

<p>好多呀~ 好困。 </p>

  </div>
<!-- 
  <div id="authorbox">
    <div class="avatar-warp">
      <span></span>
      <img alt='' src='/assets/media/author.jpg' class='avatar avatar-96 photo' height='96' width='96' />
    </div>    
    <p>作者:  <span class="author"><a href="/" title="由 唐三 发布" rel="author">ecchanger</a></span>
    </p>
      <p>简介: 互联网从业人员，JavaDevelper@Taobao.com。</p>
    <div class="clear"></div>
  </div>
-->  
<!-- 
  <div class="related">
    <h3>相关文章：</h3>
    <ul>
      <li><a href="#" rel="bookmark" title="博客迁移到ruhoh了">博客迁移到ruhoh了</a></li>
    </ul>
  </div>
-->

  <div class="post-meta">
    标签: 
    <a href="/tags#Life-ref" rel="tag">Life</a> | 
    <a href="/tags#blog-ref" rel="tag">blog</a> | 
    <a href="/tags#ruhoh-ref" rel="tag">ruhoh</a> | 
    <a href="/tags#octopress-ref" rel="tag">octopress</a> | 
    <a href="/tags#ruby-ref" rel="tag">ruby</a> | 
    <div class="clear"></div>
  </div>
  
  <nav class="post-nav">
    <span class="previous">
      <a href="/reading/%E5%B0%91%E6%9C%89%E4%BA%BA%E8%B5%B0%E7%9A%84%E8%B7%AF-%E7%BB%8F%E5%85%B8%E8%AF%AD%E5%BD%95" rel="prev">《少有人走的路》经典语录</a>
    </span>
    <span class="next">
      <a href="/studying/mac%E4%B8%8A%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E8%AE%B0%E5%BD%95-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0" rel="next">Mac上的一些小记录，持续更新...</a>
    </span>
    <div class="clear"></div>
  </nav>
</section>
  <script type="text/javascript">
    window.___gcfg={lang:'zh-CN'};
    (function(){
      var po=document.createElement('script');po.type='text/javascript';
      po.async=true;
      po.src='https://apis.google.com/js/plusone.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po,s);
    })();
  </script>
  <script type="text/javascript">
    var _gaq=_gaq || [];
    _gaq.push(['_setAccount','UA-22262498-1']);
    _gaq.push(['_setDomainName','.xuui.net']);
    _gaq.push(['_trackPageview']);
    (function(){
      var ga=document.createElement('script');
      ga.type='text/javascript';ga.async=true;
      ga.src=('https:'==document.location.protocol ? 'https://ssl' : 'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);
    })();
</script>
<div id="disqus_thread"></div>
<script>
    var disqus_developer = 1;
    var disqus_shortname = 'ecchanger'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

      </article>
      <aside id="aside">
          <ul class="clear">
      <!--
            <li id="ilost_sidebar_recentposts" class="widget">
              <h3 class="widgettitle">Next Day</h3>
              <ul class="random">
                <li style="margin-top: 10px;"><img src="/assets/media/nextday.jpg" style="width:220px;height:auto;"/></li>
              </ul>
            </li>
       -->
      
            <li id="ilost_sidebar_about" class="widget">
              <h3 class="widgettitle">About</h3>
              <div class="reavatar">
                <a href="/" title="ecchanger@gmail.com">
                  <span class="avatar-warp">
                    <img alt='' src='/assets/media/author.jpg' class='avatar avatar-64 photo' height='64' width='64' />
                  </span>
                </a>
                <p>爱爬山，爱暴走，爱骑车..我是&nbsp;<strong>谢吉宝</strong>&nbsp;，花名&nbsp;<strong>唐三</strong>&nbsp;，XY染色体，80年代产物，互联网从业人员，目前就职于&nbsp;<a target="_blank" href="http://rdc.taobao.com/team/jm">淘宝中间件团队</a>&nbsp;，主要从事性能优化方面的工作，关注新技术动态，关注互联网...本博客主要记录自己的工作、学习、生活...<br />
      <!--
                 <strong>本博客主要关注以下领域：</strong>
                <ul>
                  <li>☞ Java</li>
                  <li>☞ Performance</li>
                  <li>☞ JVM</li>
                  <li>☞ *UNIX</li>
                  <li>☞ Life</li>
                </ul>
      -->
                </p>
              </div>
            </li>
      
            <li id="ilost_sidebar_categories" class="widget">
              <h3 class="widgettitle">Categories</h3>
              <ul>
                  <li class="cat-item cat-item-1">
                    <a href="/categories#Living-ref" title="Living">Living&nbsp;(11)</a>
                  </li>
                  <li class="cat-item cat-item-1">
                    <a href="/categories#Thinking-ref" title="Thinking">Thinking&nbsp;(7)</a>
                  </li>
                  <li class="cat-item cat-item-1">
                    <a href="/categories#Coding-ref" title="Coding">Coding&nbsp;(11)</a>
                  </li>
                  <li class="cat-item cat-item-1">
                    <a href="/categories#Studying-ref" title="Studying">Studying&nbsp;(11)</a>
                  </li>
                  <li class="cat-item cat-item-1">
                    <a href="/categories#Working-ref" title="Working">Working&nbsp;(4)</a>
                  </li>
                  <li class="cat-item cat-item-1">
                    <a href="/categories#Reading-ref" title="Reading">Reading&nbsp;(5)</a>
                  </li>
              </ul>
            </li>
      
            <li id="ilost_sidebar_recentposts" class="widget">
              <h3 class="widgettitle">Articles</h3>
              <ul class="random">
                <li><a href="/working/2013-%E6%8F%90%E5%8D%87%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87" title="2013，提升工作效率...">2013，提升工作效率...</a></li>
                <li><a href="/living/%E8%AF%A5%E5%9B%9E%E9%A1%BE2012-%E5%B1%95%E6%9C%9B2013%E4%BA%86" title="该回顾2012，展望2013了...">该回顾2012，展望2013了...</a></li>
                <li><a href="/coding/%E8%BD%AC-guava-%E6%95%99%E7%A8%8B3-java-%E7%9A%84%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-%E9%80%9A%E8%BF%87-google-collections-%E8%BF%87%E6%BB%A4%E5%92%8C%E8%B0%83%E7%94%A8" title="「转」Guava 教程3-Java 的函数式编程，通过 Google Collections 过滤和调用">「转」Guava 教程3-Java 的函数式编程，通过 Google Collections 过滤和调用</a></li>
                <li><a href="/coding/%E8%BD%AC-guava-%E6%95%99%E7%A8%8B4-%E6%9D%A1%E4%BB%B6-%E5%A4%9A%E9%87%8D%E6%98%A0%E5%B0%84%E5%92%8C%E5%88%86%E7%89%87" title="「转」Guava 教程4-条件，多重映射和分片">「转」Guava 教程4-条件，多重映射和分片</a></li>
                <li><a href="/coding/%E8%BD%AC-guava-%E6%95%99%E7%A8%8B2-%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%B4%A2-google-guava-%E5%BA%93" title="「转」Guava 教程2-深入探索 Google Guava 库">「转」Guava 教程2-深入探索 Google Guava 库</a></li>
                <li><a href="/coding/%E8%BD%AC-guava-%E6%95%99%E7%A8%8B1-%E4%BD%BF%E7%94%A8-google-collections-guava-static-imports-%E7%BC%96%E5%86%99%E6%BC%82%E4%BA%AE%E4%BB%A3%E7%A0%81" title="「转」Guava 教程1-使用 Google Collections,Guava,static imports 编写漂亮代码">「转」Guava 教程1-使用 Google Collections,Guava,static imports 编写漂亮代码</a></li>
                <li><a href="/coding/log4j-vs-logback-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%8F%8A%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90" title="Log4j vs Logback 性能测试及原理分析">Log4j vs Logback 性能测试及原理分析</a></li>
                <li><a href="/studying/mac%E4%B8%8B%E4%BF%AE%E6%94%B9hosts%E6%96%87%E4%BB%B6%E9%87%8D%E5%90%AF%E5%90%8E%E8%A2%AB%E8%BF%98%E5%8E%9F%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3" title="Mac下修改hosts文件重启后被还原的问题解决">Mac下修改hosts文件重启后被还原的问题解决</a></li>
                <li><a href="/living/%E4%B8%A4%E5%A4%B4%E6%AF%9B%E9%A9%B4%E6%B8%B8%E4%B8%BD%E6%B1%9F" title="两头毛驴游丽江">两头毛驴游丽江</a></li>
                <li><a href="/studying/mac%E4%B8%8A%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E8%AE%B0%E5%BD%95-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0" title="Mac上的一些小记录，持续更新...">Mac上的一些小记录，持续更新...</a></li>
              </ul>
            </li>
            
            <li id="ilost_sidebar_tags" class="widget widget_categories" style="margin-bottom: 50px;">
              <h3 class="widgettitle">Tags</h3>
                <section class="panel panel-tags" style="margin-left: 12px;">
                <!-- <a href='/tags#diary-ref' class='tag-link-18' title='diary' style='font-size: 12px;'>diary&nbsp;(1)</a> -->
                <a href='/tags#diary-ref' class='tag-link-18' title='diary' style='font-size: 12px;'>diary</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#杭州-ref' class='tag-link-18' title='杭州' style='font-size: 12px;'>杭州&nbsp;(1)</a> -->
                <a href='/tags#杭州-ref' class='tag-link-18' title='杭州' style='font-size: 12px;'>杭州</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#入职-ref' class='tag-link-18' title='入职' style='font-size: 12px;'>入职&nbsp;(1)</a> -->
                <a href='/tags#入职-ref' class='tag-link-18' title='入职' style='font-size: 12px;'>入职</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#淘宝-ref' class='tag-link-18' title='淘宝' style='font-size: 12px;'>淘宝&nbsp;(2)</a> -->
                <a href='/tags#淘宝-ref' class='tag-link-18' title='淘宝' style='font-size: 12px;'>淘宝</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#shell-ref' class='tag-link-18' title='shell' style='font-size: 12px;'>shell&nbsp;(4)</a> -->
                <a href='/tags#shell-ref' class='tag-link-18' title='shell' style='font-size: 12px;'>shell</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">4</span> -->
                <!-- <a href='/tags#awk-ref' class='tag-link-18' title='awk' style='font-size: 12px;'>awk&nbsp;(4)</a> -->
                <a href='/tags#awk-ref' class='tag-link-18' title='awk' style='font-size: 12px;'>awk</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">4</span> -->
                <!-- <a href='/tags#Life-ref' class='tag-link-18' title='Life' style='font-size: 12px;'>Life&nbsp;(2)</a> -->
                <a href='/tags#Life-ref' class='tag-link-18' title='Life' style='font-size: 12px;'>Life</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#blog-ref' class='tag-link-18' title='blog' style='font-size: 12px;'>blog&nbsp;(2)</a> -->
                <a href='/tags#blog-ref' class='tag-link-18' title='blog' style='font-size: 12px;'>blog</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#octopress-ref' class='tag-link-18' title='octopress' style='font-size: 12px;'>octopress&nbsp;(2)</a> -->
                <a href='/tags#octopress-ref' class='tag-link-18' title='octopress' style='font-size: 12px;'>octopress</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#wordpress-ref' class='tag-link-18' title='wordpress' style='font-size: 12px;'>wordpress&nbsp;(1)</a> -->
                <a href='/tags#wordpress-ref' class='tag-link-18' title='wordpress' style='font-size: 12px;'>wordpress</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#ruhoh-ref' class='tag-link-18' title='ruhoh' style='font-size: 12px;'>ruhoh&nbsp;(1)</a> -->
                <a href='/tags#ruhoh-ref' class='tag-link-18' title='ruhoh' style='font-size: 12px;'>ruhoh</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#ruby-ref' class='tag-link-18' title='ruby' style='font-size: 12px;'>ruby&nbsp;(2)</a> -->
                <a href='/tags#ruby-ref' class='tag-link-18' title='ruby' style='font-size: 12px;'>ruby</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#tip-ref' class='tag-link-18' title='tip' style='font-size: 12px;'>tip&nbsp;(1)</a> -->
                <a href='/tags#tip-ref' class='tag-link-18' title='tip' style='font-size: 12px;'>tip</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#guava-ref' class='tag-link-18' title='guava' style='font-size: 12px;'>guava&nbsp;(4)</a> -->
                <a href='/tags#guava-ref' class='tag-link-18' title='guava' style='font-size: 12px;'>guava</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">4</span> -->
                <!-- <a href='/tags#google-ref' class='tag-link-18' title='google' style='font-size: 12px;'>google&nbsp;(4)</a> -->
                <a href='/tags#google-ref' class='tag-link-18' title='google' style='font-size: 12px;'>google</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">4</span> -->
                <!-- <a href='/tags#google collections-ref' class='tag-link-18' title='google collections' style='font-size: 12px;'>google collections&nbsp;(4)</a> -->
                <a href='/tags#google collections-ref' class='tag-link-18' title='google collections' style='font-size: 12px;'>google collections</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">4</span> -->
                <!-- <a href='/tags#visit-ref' class='tag-link-18' title='visit' style='font-size: 12px;'>visit&nbsp;(1)</a> -->
                <a href='/tags#visit-ref' class='tag-link-18' title='visit' style='font-size: 12px;'>visit</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#旅游-ref' class='tag-link-18' title='旅游' style='font-size: 12px;'>旅游&nbsp;(1)</a> -->
                <a href='/tags#旅游-ref' class='tag-link-18' title='旅游' style='font-size: 12px;'>旅游</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#游记-ref' class='tag-link-18' title='游记' style='font-size: 12px;'>游记&nbsp;(1)</a> -->
                <a href='/tags#游记-ref' class='tag-link-18' title='游记' style='font-size: 12px;'>游记</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#丽江-ref' class='tag-link-18' title='丽江' style='font-size: 12px;'>丽江&nbsp;(1)</a> -->
                <a href='/tags#丽江-ref' class='tag-link-18' title='丽江' style='font-size: 12px;'>丽江</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#小毛驴-ref' class='tag-link-18' title='小毛驴' style='font-size: 12px;'>小毛驴&nbsp;(1)</a> -->
                <a href='/tags#小毛驴-ref' class='tag-link-18' title='小毛驴' style='font-size: 12px;'>小毛驴</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#work-ref' class='tag-link-18' title='work' style='font-size: 12px;'>work&nbsp;(5)</a> -->
                <a href='/tags#work-ref' class='tag-link-18' title='work' style='font-size: 12px;'>work</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">5</span> -->
                <!-- <a href='/tags#2013-ref' class='tag-link-18' title='2013' style='font-size: 12px;'>2013&nbsp;(2)</a> -->
                <a href='/tags#2013-ref' class='tag-link-18' title='2013' style='font-size: 12px;'>2013</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#life-ref' class='tag-link-18' title='life' style='font-size: 12px;'>life&nbsp;(5)</a> -->
                <a href='/tags#life-ref' class='tag-link-18' title='life' style='font-size: 12px;'>life</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">5</span> -->
                <!-- <a href='/tags#love-ref' class='tag-link-18' title='love' style='font-size: 12px;'>love&nbsp;(2)</a> -->
                <a href='/tags#love-ref' class='tag-link-18' title='love' style='font-size: 12px;'>love</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#2011-ref' class='tag-link-18' title='2011' style='font-size: 12px;'>2011&nbsp;(1)</a> -->
                <a href='/tags#2011-ref' class='tag-link-18' title='2011' style='font-size: 12px;'>2011</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#2012-ref' class='tag-link-18' title='2012' style='font-size: 12px;'>2012&nbsp;(2)</a> -->
                <a href='/tags#2012-ref' class='tag-link-18' title='2012' style='font-size: 12px;'>2012</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#Production-ref' class='tag-link-18' title='Production' style='font-size: 12px;'>Production&nbsp;(1)</a> -->
                <a href='/tags#Production-ref' class='tag-link-18' title='Production' style='font-size: 12px;'>Production</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#启示录-ref' class='tag-link-18' title='启示录' style='font-size: 12px;'>启示录&nbsp;(1)</a> -->
                <a href='/tags#启示录-ref' class='tag-link-18' title='启示录' style='font-size: 12px;'>启示录</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#心理学-ref' class='tag-link-18' title='心理学' style='font-size: 12px;'>心理学&nbsp;(1)</a> -->
                <a href='/tags#心理学-ref' class='tag-link-18' title='心理学' style='font-size: 12px;'>心理学</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#心灵修行-ref' class='tag-link-18' title='心灵修行' style='font-size: 12px;'>心灵修行&nbsp;(1)</a> -->
                <a href='/tags#心灵修行-ref' class='tag-link-18' title='心灵修行' style='font-size: 12px;'>心灵修行</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#心智成熟-ref' class='tag-link-18' title='心智成熟' style='font-size: 12px;'>心智成熟&nbsp;(1)</a> -->
                <a href='/tags#心智成熟-ref' class='tag-link-18' title='心智成熟' style='font-size: 12px;'>心智成熟</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#派克-ref' class='tag-link-18' title='派克' style='font-size: 12px;'>派克&nbsp;(1)</a> -->
                <a href='/tags#派克-ref' class='tag-link-18' title='派克' style='font-size: 12px;'>派克</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#读书笔记-ref' class='tag-link-18' title='读书笔记' style='font-size: 12px;'>读书笔记&nbsp;(1)</a> -->
                <a href='/tags#读书笔记-ref' class='tag-link-18' title='读书笔记' style='font-size: 12px;'>读书笔记</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#log4j-ref' class='tag-link-18' title='log4j' style='font-size: 12px;'>log4j&nbsp;(1)</a> -->
                <a href='/tags#log4j-ref' class='tag-link-18' title='log4j' style='font-size: 12px;'>log4j</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#logback-ref' class='tag-link-18' title='logback' style='font-size: 12px;'>logback&nbsp;(1)</a> -->
                <a href='/tags#logback-ref' class='tag-link-18' title='logback' style='font-size: 12px;'>logback</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#performance-ref' class='tag-link-18' title='performance' style='font-size: 12px;'>performance&nbsp;(1)</a> -->
                <a href='/tags#performance-ref' class='tag-link-18' title='performance' style='font-size: 12px;'>performance</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#java-ref' class='tag-link-18' title='java' style='font-size: 12px;'>java&nbsp;(1)</a> -->
                <a href='/tags#java-ref' class='tag-link-18' title='java' style='font-size: 12px;'>java</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#ecnu-ref' class='tag-link-18' title='ecnu' style='font-size: 12px;'>ecnu&nbsp;(1)</a> -->
                <a href='/tags#ecnu-ref' class='tag-link-18' title='ecnu' style='font-size: 12px;'>ecnu</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#2008-ref' class='tag-link-18' title='2008' style='font-size: 12px;'>2008&nbsp;(1)</a> -->
                <a href='/tags#2008-ref' class='tag-link-18' title='2008' style='font-size: 12px;'>2008</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#review-ref' class='tag-link-18' title='review' style='font-size: 12px;'>review&nbsp;(1)</a> -->
                <a href='/tags#review-ref' class='tag-link-18' title='review' style='font-size: 12px;'>review</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#mac-ref' class='tag-link-18' title='mac' style='font-size: 12px;'>mac&nbsp;(2)</a> -->
                <a href='/tags#mac-ref' class='tag-link-18' title='mac' style='font-size: 12px;'>mac</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#tips-ref' class='tag-link-18' title='tips' style='font-size: 12px;'>tips&nbsp;(1)</a> -->
                <a href='/tags#tips-ref' class='tag-link-18' title='tips' style='font-size: 12px;'>tips</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#lion-ref' class='tag-link-18' title='lion' style='font-size: 12px;'>lion&nbsp;(2)</a> -->
                <a href='/tags#lion-ref' class='tag-link-18' title='lion' style='font-size: 12px;'>lion</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">2</span> -->
                <!-- <a href='/tags#OSX-ref' class='tag-link-18' title='OSX' style='font-size: 12px;'>OSX&nbsp;(1)</a> -->
                <a href='/tags#OSX-ref' class='tag-link-18' title='OSX' style='font-size: 12px;'>OSX</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#apple-ref' class='tag-link-18' title='apple' style='font-size: 12px;'>apple&nbsp;(1)</a> -->
                <a href='/tags#apple-ref' class='tag-link-18' title='apple' style='font-size: 12px;'>apple</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#hosts-ref' class='tag-link-18' title='hosts' style='font-size: 12px;'>hosts&nbsp;(1)</a> -->
                <a href='/tags#hosts-ref' class='tag-link-18' title='hosts' style='font-size: 12px;'>hosts</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#hosts.ac-ref' class='tag-link-18' title='hosts.ac' style='font-size: 12px;'>hosts.ac&nbsp;(1)</a> -->
                <a href='/tags#hosts.ac-ref' class='tag-link-18' title='hosts.ac' style='font-size: 12px;'>hosts.ac</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#Cisco AnyConnect-ref' class='tag-link-18' title='Cisco AnyConnect' style='font-size: 12px;'>Cisco AnyConnect&nbsp;(1)</a> -->
                <a href='/tags#Cisco AnyConnect-ref' class='tag-link-18' title='Cisco AnyConnect' style='font-size: 12px;'>Cisco AnyConnect</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#English-ref' class='tag-link-18' title='English' style='font-size: 12px;'>English&nbsp;(1)</a> -->
                <a href='/tags#English-ref' class='tag-link-18' title='English' style='font-size: 12px;'>English</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#reading-ref' class='tag-link-18' title='reading' style='font-size: 12px;'>reading&nbsp;(1)</a> -->
                <a href='/tags#reading-ref' class='tag-link-18' title='reading' style='font-size: 12px;'>reading</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#thinging-ref' class='tag-link-18' title='thinging' style='font-size: 12px;'>thinging&nbsp;(1)</a> -->
                <a href='/tags#thinging-ref' class='tag-link-18' title='thinging' style='font-size: 12px;'>thinging</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#Linux-ref' class='tag-link-18' title='Linux' style='font-size: 12px;'>Linux&nbsp;(1)</a> -->
                <a href='/tags#Linux-ref' class='tag-link-18' title='Linux' style='font-size: 12px;'>Linux</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#Unix-ref' class='tag-link-18' title='Unix' style='font-size: 12px;'>Unix&nbsp;(1)</a> -->
                <a href='/tags#Unix-ref' class='tag-link-18' title='Unix' style='font-size: 12px;'>Unix</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#OS-ref' class='tag-link-18' title='OS' style='font-size: 12px;'>OS&nbsp;(1)</a> -->
                <a href='/tags#OS-ref' class='tag-link-18' title='OS' style='font-size: 12px;'>OS</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#帮派-ref' class='tag-link-18' title='帮派' style='font-size: 12px;'>帮派&nbsp;(1)</a> -->
                <a href='/tags#帮派-ref' class='tag-link-18' title='帮派' style='font-size: 12px;'>帮派</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                <!-- <a href='/tags#攻击-ref' class='tag-link-18' title='攻击' style='font-size: 12px;'>攻击&nbsp;(1)</a> -->
                <a href='/tags#攻击-ref' class='tag-link-18' title='攻击' style='font-size: 12px;'>攻击</a>
                <!-- <span style="vertical-align: super;font-size: 0.6em;">1</span> -->
                </section>
            </li>
      <!--
            <li id="ilost_rcommentswidget-2" class="widget ilost_RCommentsWidget">
              <h3 class="widgettitle">最近评论</h3>
              <ul class="comment">
                <li>
                  <span class="avatar-warp">
                    <img alt='' src='/assets/ilost/stylesheets/images/guest.png' class='avatar avatar-64 photo' height='64' width='64' />
                  </span>
                  <a href="http://xuui.net/themes/ilost-full-1-7-updata.html#comment-11479" title="On iLost Full 1.7 更新">zyzzyq.c@gmail.com</a>: 请问一下，iStudio网站大标题是宋体，这个在哪里改啊？在css的啥位置。。谢谢！
                </li>
              </ul>
            </li>
       -->
      
      <!--
            <li id="meta-4" class="widget widget_meta">
              <h3 class="widgettitle">功能</h3>
              <ul>
                <li><a href="http://xuui.net/wp-login.php?action=register">注册</a></li>
                <li><a href="http://xuui.net/wp-login.php">登录</a></li>
                <li><a href="http://xuui.net/feed" title="使用 RSS 2.0 订阅本站点内容">文章 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
                <li><a href="http://xuui.net/comments/feed" title="使用 RSS 订阅本站点的所有文章的近期评论">评论 <abbr title="Really Simple Syndication">RSS</abbr></a>
                </li>
                <li><a href="http://cn.wordpress.org/" title="基于 WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a>
                </li>
              </ul>
            </li>
       -->
          </ul>
        </aside>
      <div class="clear"></div>
    </div>
    <footer>
      <div id="gotop">
        <a href="javascript:;" onClick="ilosts.goTop();return false;" title="返回顶部">返回顶部</a>
      </div>
    <!--  
      <aside>
        <h3>Xu Design Archives</h3>
        <ul>
          <li id="ilost_catlistswidget-1" class="widget ilost_catlistsWidget">
            <h3>License</h3>
            <ul>
              如非特别声明，本 Blog 的文章由 <a href="//about">唐三 </a>创作，采用<a style="white-space:pre-wrap;" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">知识共享署名-非商业性使用-相同方式共享 3.0 Unported 许可协议</a>进行许可。
            </ul>
          </li>
          <li id="ilost_catlistswidget-2" class="widget ilost_catlistsWidget">
            <h3>Librarys</h3>
            <ul>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
            </ul>
          </li>
    
          <li id="ilost_catlistswidget-3" class="widget ilost_catlistsWidget">
            <h3>Themes</h3>
            <ul>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
            </ul>
          </li>
    
          <li id="ilost_catlistswidget-4" class="widget ilost_catlistsWidget">
            <h3>UI Design</h3>
            <ul>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
            </ul>
          </li>
    
          <li id="ilost_catlistswidget-5" class="widget ilost_catlistsWidget">
            <h3>WordPress</h3>
            <ul>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
              <li><a href="#" title="test title">这是唐三的测试页面，我要很长很长的啊，你说这么长够长么....</a></li>
            </ul>
          </li>
          
        </ul>
        <div class="clearer"></div>
      </aside>
    -->
      <div>
        <p class="line">
          <span class="alignright">
            <a href="/">HOME</a>
          </span>
          本博部分图片来自网上，请如侵权请联系本人进行删除！&brvbar; 
          <a href="http://creativecommons.org/licenses/by-nc-sa/3.0">Creative Commons BY-NC-SA</a> &brvbar; This is a premium theme &brvbar; Designed by <a href="http://xuui.net/">Xu.hel</a> in ChengDu.
        </p>
        
        <p>
          <span class="alignright">
            <a target="_blank" href="http://github.com/ecchanger" title="Hosted by Github">The website is hosted by Github</a>
          </span>Copyright &copy; 2004-2013 <a href="/" title="On the Road" rel="home">On The Road</a> &brvbar; Powered by <a href="http://ruhoh.com/">Ruhoh</a>.    
        </p>
      </div>
    </footer>
    <script type='text/javascript' src='/assets/ilost/javascripts/load.js?ver=1.5.0'></script>
    
    <script src='/assets/ilost/javascripts/scripts.js?ver=1.3'></script>
    <!-- Google Prettify -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
    <!-- <script>
  var _gaq=[['_setAccount','UA-123-12'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script> -->

  </body>
</html>
